# KANUTE - version testing between softwares and versions   <a name="Top"></a> 

# Working notebook

### Dave T. Gerrard, University of Manchester
### Produced `r Sys.Date()`
[Dave's website](http://personalpages.manchester.ac.uk/staff/David.Gerrard/)


## Table of contents ##
- [Example](#Example)
- [](#)
- [](#)
``` {r label_2, echo=FALSE}
# What is the working directory?
getwd()
options(width=500)

```

[Back to top](#Top)


## <a name="Example"></a>Example ##

TODO



```{r}

########### Reading testing results produced elsewhere (no local testing, only comparison).
#
parent_dir <-  paste(Sys.getenv("SCRATCH"),"kanute", sep="/")
testingFolder <- paste(parent_dir, "TestFolder", sep="/")
testDirTop <- paste(testingFolder, "tests",sep="/")
outputsDirTop <- paste(testingFolder, "outputs",sep="/")
source(paste(parent_dir, "scripts/kanute_funcs.R", sep="/"))
#
#
#
#
softwares <- c("bowtie", "bowtie2")
#
testing.list <- scanTestDir(softwares=softwares, testDirTop=testDirTop)
#
#
#
test.library <- compileTestResults(testing.list, outputsDirTop)
#
#
#
test.results <- compareTests(test.library)
#
## created a tab-delim file called test.mappings in top of tests/ folder
## mapping.name software1 software1.testA software2   software2.testA TRUE
## the final column is TRUE if expect results to be the same, FALSE if not or NA if unknown.
## May need to be 1/0 instead of TRUE/FALSE
#
test.mappings <- read.delim(paste(testDirTop, "test.mappings", sep="/"), header=F, stringsAsFactors=F)
names(test.mappings) <- c("mapping.name", "software1", "software1.test", "software2", "software2.test", "expectIdentical")
#
#
#
test.results <- compareTests(test.library, mapped.tests=test.mappings)
#
#
## by default, if mapped.tests parameter given, tests within Software is suppressed
## Here's how to turn it back on
test.results <- compareTests(test.library, mapped.tests=test.mappings, show.all.tests=TRUE)
#
#
### specify the reference versions to be used in tests BETWEEN software
test.results <- compareTests(test.library, mapped.tests=test.mappings, ref.versions=list(bowtie="1.0.1", bowtie2="2.2.3"))
#
#

#What have we got at the end of all that
test.results

```



[Back to top](#Top)


[Back to top](#Top)


## <a name="Anchor_name"></a>Start of next section ##

[Back to top](#Top)

## About this file 

Produced from an R-markdown (Rmd) file ../reports/example.Rmd . 

NOT CURRENTLYPart of an analysis pipeline controlled by 'make' processing this [makefile](../makefile)


[Back to top](#Top)

To compile me, run this in shell:

``` {shell}
cd ~/HanleyGroup/BerryChIPseq_multiTissue
make

```

Information about the R session:-

```{r Session-Info, echo=T}
sessionInfo()
```
